{"version":3,"file":"navigation.min.js","sources":["../src/navigation.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Open Educational Resources Plugin\n *\n * @author     Christian Ortner <christian.ortner@tugraz.at>\n * @copyright  2022 Educational Technologies, Graz, University of Technology\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as UserPreference from 'local_oer/userpreferences';\nimport * as Output from 'local_oer/output';\nimport * as Str from 'core/str';\n\n/**\n * Add listener for layout menu.\n */\nexport const initLayoutListener = () => {\n    var element = document.getElementById(\"local_oer-select-layout\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        UserPreference.setLayout(action.target.dataset.value);\n        Output.showFiles();\n    });\n};\n\n/**\n * Add listener for sort menu.\n */\nexport const initSortListener = () => {\n    var element = document.getElementById(\"local_oer-sort-files\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        UserPreference.setSort(action.target.dataset.value);\n        Output.showFiles();\n    });\n};\n\n/**\n * Add listener for filter menu.\n */\nexport const initGroupingListener = () => {\n    var element = document.getElementById(\"local_oer-select-grouping\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        if (typeof action.target.dataset.value === 'undefined') {\n            return;\n        }\n        let filtervalue = action.target.dataset.filtervalue;\n        UserPreference.setFilter(action.target.dataset.value, filtervalue);\n        Output.showFiles();\n    });\n};\n\n/**\n * Add listener for courseinfo button.\n */\nexport const initCourseinfoListener = () => {\n    var element = document.getElementById(\"local_oer_courseinfo_button\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        let title = Str.get_string('courseinfobutton', 'local_oer');\n        title.done(function(localizedTitle) {\n            Output.showForm('CourseinfoForm', localizedTitle, {});\n        });\n    });\n};\n\n/**\n * Add listener for preference button.\n */\nexport const initPreferenceListener = () => {\n    var element = document.getElementById(\"local_oer_preference_button\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        let title = Str.get_string('preferencebutton', 'local_oer');\n        title.done(function(localizedTitle) {\n            Output.showForm('PreferenceForm', localizedTitle, {});\n        });\n    });\n};\n\n/**\n * Add listener for text search field.\n */\nexport const initSearchListener = () => {\n    let searchInput = document.getElementById('local_oer_searchFilecardsInput');\n    if (searchInput === null) {\n        return;\n    }\n    let searchFiles = debounce(function() {\n        Output.showFiles();\n    }, 500, false);\n\n    searchInput.addEventListener(\"keyup\", searchFiles);\n    searchInput.addEventListener(\"search\", function() {\n        Output.showFiles();\n    });\n};\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n * Taken from https://davidwalsh.name/javascript-debounce-function\n *\n * @param {function} func\n * @param {int} wait\n * @param {boolean} immediate\n * @returns {(function(): void)|*}\n */\nconst debounce = (func, wait, immediate) => {\n    let timeout;\n    return function() {\n        let context = this;\n        let args = arguments;\n        let later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        let callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n};"],"names":["_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireWildcard","obj","__esModule","_typeof","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","UserPreference","Output","Str","_exports","initLayoutListener","element","document","getElementById","addEventListener","action","preventDefault","setLayout","target","dataset","value","showFiles","initSortListener","setSort","initGroupingListener","filtervalue","setFilter","initCourseinfoListener","get_string","done","localizedTitle","showForm","initPreferenceListener","initSearchListener","searchInput","searchFiles","debounce","func","wait","immediate","timeout","context","this","args","arguments","callNow","clearTimeout","setTimeout","apply"],"mappings":"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"}