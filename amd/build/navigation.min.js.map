{"version":3,"file":"navigation.min.js","sources":["../src/navigation.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Open Educational Resources Plugin\n *\n * @author     Christian Ortner <christian.ortner@tugraz.at>\n * @copyright  2022 Educational Technologies, Graz, University of Technology\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as UserPreference from 'local_oer/userpreferences';\nimport * as Output from 'local_oer/output';\nimport * as Str from 'core/str';\n\n/**\n * Add listener for layout menu.\n */\nexport const initLayoutListener = () => {\n    const element = document.getElementById(\"local_oer-select-layout\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        UserPreference.setLayout(action.target.dataset.value);\n        Output.showFiles(false, true);\n    });\n};\n\n/**\n * Add listener for sort menu.\n */\nexport const initSortListener = () => {\n    const element = document.getElementById(\"local_oer-sort-files\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        UserPreference.setSort(action.target.dataset.value);\n        Output.showFiles(false, true);\n    });\n};\n\n/**\n * Add listener for filter menu.\n */\nexport const initGroupingListener = () => {\n    const element = document.getElementById(\"local_oer-select-grouping\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        if (typeof action.target.dataset.value === 'undefined') {\n            return;\n        }\n        let filtervalue = action.target.dataset.filtervalue;\n        UserPreference.setFilter(action.target.dataset.value, filtervalue);\n        Output.showFiles(false, true);\n    });\n};\n\n/**\n * Add listener for courseinfo button.\n */\nexport const initCourseinfoListener = () => {\n    const element = document.getElementById(\"local_oer_courseinfo_button\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        const title = Str.get_string('courseinfobutton', 'local_oer');\n        title.done(function(localizedTitle) {\n            Output.showForm('CourseinfoForm', localizedTitle, {});\n        });\n    });\n};\n\n/**\n * Add listener for preference button.\n */\nexport const initPreferenceListener = () => {\n    const element = document.getElementById(\"local_oer_preference_button\");\n    if (element === null) {\n        return;\n    }\n\n    element.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        const title = Str.get_string('preferencebutton', 'local_oer');\n        title.done(function(localizedTitle) {\n            Output.showForm('PreferenceForm', localizedTitle, {});\n        });\n    });\n};\n\n/**\n * Add listener for text search field.\n */\nexport const initSearchListener = () => {\n    const searchInput = document.getElementById('local_oer_searchFilecardsInput');\n    if (searchInput === null) {\n        return;\n    }\n    const searchFiles = debounce(function() {\n        Output.showFiles(false, true);\n    }, 500, false);\n\n    searchInput.addEventListener(\"keyup\", searchFiles);\n    searchInput.addEventListener(\"search\", function() {\n        Output.showFiles(false, true);\n    });\n};\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n * Taken from https://davidwalsh.name/javascript-debounce-function\n *\n * @param {function} func\n * @param {int} wait\n * @param {boolean} immediate\n * @returns {(function(): void)|*}\n */\nconst debounce = (func, wait, immediate) => {\n    let timeout;\n    return function() {\n        const context = this;\n        const args = arguments;\n        const later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        const callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n};"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireWildcard","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","UserPreference","Output","Str","_exports","initLayoutListener","element","document","getElementById","addEventListener","action","preventDefault","setLayout","target","dataset","value","showFiles","initSortListener","setSort","initGroupingListener","filtervalue","setFilter","initCourseinfoListener","get_string","done","localizedTitle","showForm","initPreferenceListener","initSearchListener","searchInput","searchFiles","debounce","func","wait","immediate","timeout","context","this","args","arguments","callNow","clearTimeout","setTimeout","apply"],"mappings":"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"}