define("local_oer/config",["exports","local_oer/userpreferences"],(function(_exports,UserPreference){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getOutputValues=void 0,UserPreference=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}
/**
   * Open Educational Resources Plugin
   *
   * @author     Christian Ortner <christian.ortner@tugraz.at>
   * @copyright  2022 Educational Technologies, Graz, University of Technology
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */(UserPreference);_exports.getOutputValues=init=>{let filelist=document.getElementById("local-oer-overview-filelist").innerHTML,output=JSON.parse(filelist);output.init=void 0!==init&&init,output.shownavigation=output.files.length>0;output.founddeleted=!1,output.files.forEach((function(file){1===file.deleted&&(output.founddeleted=!0)}));let chosenfilterobject=UserPreference.getFilter(),chosenfilter=chosenfilterobject.filter,additionalvalue=chosenfilterobject.value;["f_all","f_upload","f_norelease","f_ignore","f_noignore","f_deleted","f_origin","f_released"].forEach((function(filter){output[filter]=!1,filter===chosenfilter&&(output[filter]=!0)}));let filteredFiles=[];"f_all"!==chosenfilter&&(output.init=!1,output.files.forEach((function(file){switch(chosenfilter){case"f_upload":!0===file.upload&&filteredFiles.push(file);break;case"f_norelease":!1===file.upload&&!1===file.ignore&&filteredFiles.push(file);break;case"f_ignore":!0===file.ignore&&filteredFiles.push(file);break;case"f_noignore":!1===file.ignore&&filteredFiles.push(file);break;case"f_released":file.timeuploadedts>0&&filteredFiles.push(file);break;case"f_deleted":!0===file.deleted&&filteredFiles.push(file);break;case"f_origin":file.origins.forEach((function(origin){origin.origin===additionalvalue&&filteredFiles.push(file)}))}})),output.files=filteredFiles);let search=document.getElementById("local_oer_searchFilecardsInput");if(search){let searchValue=search.value,searchOutput=[];""!==searchValue&&(output.files.forEach((function(file){file.title.toLowerCase().includes(searchValue.toLowerCase())&&searchOutput.push(file)})),output.files=searchOutput)}let chosensort=UserPreference.getSort();switch(["s_default","s_title_asc","s_title_desc","s_mimetype","s_released"].forEach((function(option){output[option]=!1,option===chosensort&&(output[option]=!0)})),chosensort){case"s_default":output.files.sort(((a,b)=>a.ignore-b.ignore));break;case"s_title_asc":output.files.sort(((a,b)=>a.title.toLowerCase().localeCompare(b.title.toLowerCase())));break;case"s_title_desc":output.files.sort(((b,a)=>a.title.toLowerCase().localeCompare(b.title.toLowerCase())));break;case"s_mimetype":output.files.sort(((a,b)=>a.mimetype.toLowerCase().localeCompare(b.mimetype.toLowerCase())));break;case"s_released":output.files.sort(((b,a)=>a.timeuploadedts-b.timeuploadedts))}let courseid=document.getElementById("local_oer_files_main_area").dataset.courseid,selected=localStorage.getItem("local-oer-pagination-selected-"+courseid),page=parseInt(localStorage.getItem("local-oer-pagination-current-"+courseid),10);isNaN(page)&&(page=1,localStorage.setItem("local-oer-pagination-current-"+courseid,"1"));let oldfiles=parseInt(localStorage.getItem("local-oer-pagination-filecount-"+courseid),10);localStorage.setItem("local-oer-pagination-filecount-"+courseid,output.files.length.toString()),isNaN(oldfiles)||oldfiles===output.files.length||1===page||(page=1,localStorage.setItem("local-oer-pagination-current-"+courseid,"1"));let shownFiles=[];if("all"!==selected){null===selected&&(selected="8");let amount=parseInt(selected,10),firstelement=(page-1)*amount,lastelement=page*amount-1;output.files.forEach((function(file,index){index>=firstelement&&index<=lastelement&&shownFiles.push(file)})),output.files=shownFiles}if("list"===UserPreference.getLayout())output.card=!1,output.list=!0;else output.card=!0,output.list=!1;return output}}));

//# sourceMappingURL=config.min.js.map