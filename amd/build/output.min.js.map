{"version":3,"file":"output.min.js","sources":["../src/output.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Open Educational Resources Plugin\n *\n * @author     Christian Ortner <christian.ortner@tugraz.at>\n * @copyright  2022-2023 Educational Technologies, Graz, University of Technology\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Service from 'local_oer/service';\nimport * as Templates from \"core/templates\";\nimport * as Config from \"local_oer/config\";\nimport * as ModalFactory from 'core/modal_factory';\nimport * as ModalEvents from 'core/modal_events';\nimport * as Fragment from 'core/fragment';\nimport * as Str from 'core/str';\n\n/**\n * Show the files in the browser.\n *\n * @param {boolean} init\n * @param {boolean} keepFocus\n */\nexport const showFiles = (init, keepFocus) => {\n    const output = Config.getOutputValues(init);\n    const oldSearchInput = document.getElementById('local_oer_searchFilecardsInput');\n    let oldSearchValue = '';\n    if (oldSearchInput !== null) {\n        oldSearchValue = oldSearchInput.value;\n    }\n    Templates.render('local_oer/files', output)\n        .then(function(html, js) {\n            Templates.replaceNodeContents('#local-oer-overview', html, js);\n            const searchInput = document.getElementById('local_oer_searchFilecardsInput');\n            window.console.log(init, keepFocus);\n            if (keepFocus && searchInput !== null) {\n                // Workaround to fix losing focus of search after Template.replaceNodeContents.\n                // The navigation controls are inside the template and replaced after every search.\n                searchInput.value = oldSearchValue;\n                searchInput.focus();\n            }\n            return; // For eslint.\n        }).fail(function(error) {\n        window.console.debug(error);\n    });\n    showPagination();\n};\n\n/**\n * Load a form from the backend and show it in a modal.\n *\n * @param {string} type\n * @param {string} title\n * @param {object} options\n */\nexport const showForm = (type, title, options) => {\n    const params = JSON.stringify(options);\n    const courseid = document.getElementById(\"local_oer_files_main_area\").dataset.courseid;\n    const context = document.getElementById(\"local_oer_files_main_area\").dataset.context;\n    const args = {\n        courseid: courseid,\n        formtype: type,\n        params: params,\n    };\n    const form = Fragment.loadFragment('local_oer', 'formdata', context, args);\n    form.done(function(data) {\n        // TODO: Better way to do this?\n        let nosave = data.includes('<input name=\"nosave\" type=\"hidden\" value=\"1\" />');\n        if (nosave !== false) {\n            type = 'nosave';\n        }\n        showFormModal(form, type, title, options);\n    });\n};\n\n\nconst showFormModal = (form, type, title, options) => {\n    const element = document.getElementById(\"local_oer_files_main_area\");\n    const modaltype = type === 'nosave' ? ModalFactory.types.CANCEL : ModalFactory.types.SAVE_CANCEL;\n    ModalFactory.create({\n        type: modaltype,\n        title: title,\n        body: form,\n    }).then(function(modal) {\n        modal.setLarge();\n        modal.show();\n        switch (type) {\n            case 'FileinfoForm':\n            case 'FileinfoFormSave':\n                initPersonButtonListener();\n                addRemoveTagListener('storedperson');\n                initSetPreferenceListener(modal);\n                addInputFieldInputListener('stored', 'tags');\n                break;\n            case 'PreferenceForm':\n            case 'PreferenceFormSave':\n                // Add additional form listener(s) and special behaviour.\n                initPersonButtonListener();\n                addRemoveTagListener('storedperson');\n                addInputFieldInputListener('stored', 'tags');\n                break;\n        }\n        modal.getRoot().on(ModalEvents.hidden, function() {\n            modal.destroy();\n        });\n        modal.getRoot().on(ModalEvents.save, function() {\n            saveForm(modal, element, options, type, title);\n        });\n        return; // For eslint.\n    }).catch(function(error) {\n        window.console.debug(error);\n    });\n};\n\nconst saveForm = (modal, element, options, type, title) => {\n    const formData = modal.getRoot().find('form').serialize();\n    const saveargs = {\n        courseid: element.dataset.courseid,\n        formtype: type + 'Save',\n        params: JSON.stringify(Object.assign(options, {settings: formData}))\n    };\n    const context = element.dataset.context;\n    const formSubmit = Fragment.loadFragment('local_oer', 'formdata', context, saveargs);\n    formSubmit.done(function(response) {\n        if (response.indexOf('<form') !== -1) {\n            modal.destroy();\n            if (options.hasOwnProperty('preference')) {\n                delete options.preference;\n                replaceFileInfo(Service.loadFile(options.identifier));\n            }\n            showFormModal(formSubmit, type, title, options);\n        } else if (type === 'FileinfoForm') {\n            replaceFileInfo(Service.loadFile(options.identifier));\n        } else if (type === 'PreferenceForm') {\n            prepareFiles(Service.loadFiles(), true);\n        }\n    }).catch(function(error) {\n        window.console.debug('Form submission failed', error);\n    });\n};\n\nconst replaceFileInfo = (promises) => {\n    promises[0].done(function(response) {\n        const filelist = document.getElementById(\"local-oer-overview-filelist\").innerHTML;\n        const output = JSON.parse(filelist);\n        output.files.forEach(function(file, index) {\n            if (file.identifier === response.file.identifier) {\n                output.files[index] = response.file;\n            }\n        });\n        document.getElementById(\"local-oer-overview-filelist\").innerHTML = JSON.stringify(output);\n        showFiles(false, true);\n    });\n};\n\n/**\n * Prepare the filecard informations for output.\n *\n * @param {object} promises\n * @param {boolean} init\n */\nexport const prepareFiles = (promises, init) => {\n    promises[0].done(function(response) {\n        document.getElementById(\"local-oer-overview-filelist\").innerHTML = JSON.stringify(response);\n        showFiles(init, true);\n    });\n};\n\nconst addInputFieldInputListener = (prefix, area) => {\n    showTags(prefix + area);\n    document.getElementById('id_' + area).addEventListener('keypress', function(e) {\n        if (e.key !== 'Enter') {\n            return;\n        }\n        addStoredTag(prefix, area);\n        showTags(prefix + area);\n    });\n    document.getElementById('id_' + area).addEventListener('focusout', function() {\n        if (area.length === 0) {\n            return;\n        }\n        addStoredTag(prefix, area);\n        showTags(prefix + area);\n    });\n    addRemoveTagListener(prefix + area);\n};\n\nconst addStoredTag = (prefix, tagarea) => {\n    const select = document.getElementById('id_' + tagarea);\n    let tag = select.value;\n    tag = tag.replace(',', ' ').trim();\n    const tags = document.querySelector('[name=\"' + prefix + tagarea + '\"]').value;\n    document.getElementById('id_' + tagarea).value = '';\n    if (!tags.includes(tag)) {\n        if (tags === '') {\n            document.querySelector('[name=\"' + prefix + tagarea + '\"]').value = tag;\n        } else {\n            document.querySelector('[name=\"' + prefix + tagarea + '\"]').value = tags + ',' + tag;\n        }\n    }\n};\n\nconst addRemoveTagListener = (tagarea) => {\n    document.getElementById('local_oer_' + tagarea + '_tagarea').addEventListener('click', function(e) {\n        if (e.target.dataset.name !== tagarea) {\n            return;\n        }\n        if (tagarea === 'storedperson') {\n            removePerson(e.target.dataset);\n        } else {\n            let name = e.target.dataset.value;\n            let tags = document.querySelector('[name=\"' + tagarea + '\"]').value.split(',');\n            let result = [];\n            tags.forEach(function(tag) {\n                if (tag !== '' && tag !== name) {\n                    result.push(tag);\n                }\n            });\n            document.querySelector('[name=\"' + tagarea + '\"]').value = result.join(',');\n            showTags(tagarea);\n        }\n    });\n};\n\nconst showTags = (tagarea) => {\n    let entries = document.querySelector('[name=\"' + tagarea + '\"]').value;\n    let tags = {tags: []};\n    if (entries.length > 0) {\n        entries = entries.split(',');\n        entries.forEach(function(entry) {\n            tags.tags.push({tagarea: tagarea, tagvalue: entry, tag: entry});\n        });\n    } else {\n        tags = false;\n    }\n\n    Templates.render('local_oer/tags', tags)\n        .then(function(html, js) {\n            Templates.replaceNodeContents('#local_oer_' + tagarea + '_tagarea', html, js);\n            return; // For eslint.\n        }).fail(function(e) {\n            window.console.log(e);\n        }\n    );\n};\n\nconst initSetPreferenceListener = (modal) => {\n    const button = document.getElementById(\"local_oer_preferenceResetButton\");\n    if (button === null) {\n        return;\n    }\n\n    button.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        let options = {\n            identifier: button.dataset.identifier,\n            preference: button.dataset.preference\n        };\n        let element = document.getElementById(\"local_oer_files_main_area\");\n        saveForm(modal, element, options, 'FileinfoForm', 'FileinfoForm');\n    });\n};\n\nconst initPersonButtonListener = () => {\n    const button = document.getElementById(\"local_oer_addPersonButton\");\n    if (button === null) {\n        return;\n    }\n\n    showPersons();\n\n    button.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        showPersonForm();\n    });\n};\n\nconst showPersonForm = (setInvalid) => {\n    if (typeof setInvalid === 'undefined') {\n        setInvalid = false;\n    }\n    const creator = document.querySelector('[name=\"creator\"]').value;\n    const context = document.getElementById(\"local_oer_files_main_area\").dataset.context;\n    const form = Fragment.loadFragment('local_oer', 'personform', context, {'creator': creator});\n    form.done(function() {\n        let title = Str.get_string('addpersonbtn', 'local_oer');\n        title.done(function(localizedTitle) {\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: localizedTitle,\n                body: form,\n            }).then(function(modal) {\n                modal.setSaveButtonText(localizedTitle);\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    modal.destroy();\n                });\n                modal.getRoot().on(ModalEvents.save, function() {\n                    const formData = modal.getRoot().find('form').serialize();\n                    const fields = formData.split('&');\n                    let role = '';\n                    let firstname = '';\n                    let lastname = '';\n                    fields.forEach(function(field) {\n                        let pair = field.split('=');\n                        let key = pair[0];\n                        let value = pair[1];\n                        switch (key) {\n                            case 'role':\n                                role = value;\n                                break;\n                            case 'firstname':\n                                firstname = value;\n                                break;\n                            case 'lastname':\n                                lastname = value;\n                                break;\n                        }\n                    });\n                    const name = {\n                        role: role,\n                        firstname: firstname,\n                        lastname: lastname,\n                    };\n                    addPerson(name);\n\n                });\n                modal.show();\n                if (setInvalid) {\n                    let element = document.getElementById(\"id_firstname\");\n                    element.classList.add(\"is-invalid\");\n                    element = document.getElementById(\"id_lastname\");\n                    element.classList.add(\"is-invalid\");\n                }\n                return; // For eslint.\n            }).catch(function(error) {\n                window.console.debug(error);\n            });\n        });\n    });\n};\n\n/**\n * People to add always have a first- and lastname and role.\n *\n * When already a person is defined with the same role and a full name,\n * first and lastname is added. This variant will be preferred.\n *\n * @param {{role: string, firstname: string, lastname: string}} person\n */\nconst addPerson = (person) => {\n    let names = document.querySelector('[name=\"storedperson\"]').value;\n    if (names !== '') {\n        names = JSON.parse(names);\n        let found = false;\n        let update = false;\n        names.persons.forEach(function(storedname, key) {\n            if (person.role === storedname.role\n                && person.firstname === storedname.firstname\n                && person.lastname === storedname.lastname) {\n                found = true;\n            }\n            if (person.role === storedname.role\n                && person.firstname + ' ' + person.lastname === storedname.fullname) {\n                found = true;\n                update = true;\n                names.persons[key].firstname = person.firstname;\n                names.persons[key].lastname = person.lastname;\n            }\n        });\n        // If one of the required fields is empty, reload the form.\n        if (person.firstname === '' || person.lastname === '') {\n            showPersonForm(true);\n            return;\n        } else if (!found) {\n            names.persons.push(person);\n            document.querySelector('[name=\"storedperson\"]').value = JSON.stringify(names);\n        } else if (update) {\n            document.querySelector('[name=\"storedperson\"]').value = JSON.stringify(names);\n        }\n    } else {\n        document.querySelector('[name=\"storedperson\"]').value = JSON.stringify({persons: [person]});\n    }\n    showPersons();\n};\n\nconst removePerson = (person) => {\n    let entries = document.querySelector('[name=\"storedperson\"]').value;\n    if (entries === '') {\n        return;\n    }\n    entries = JSON.parse(entries);\n    const persons = {persons: []};\n    entries.persons.forEach(function(storedperson) {\n        if (person.role === storedperson.role\n            && ((person.firstname === storedperson.firstname\n                    && person.lastname === storedperson.lastname)\n                || person.fullname === storedperson.fullname)) {\n            // Skip this person.\n        } else {\n            persons.persons.push(storedperson);\n        }\n    });\n    document.querySelector('[name=\"storedperson\"]').value = JSON.stringify(persons);\n    showPersons();\n};\n\nconst showPersons = () => {\n    let entries = document.querySelector('[name=\"storedperson\"]').value;\n    if (entries === '') {\n        return;\n    }\n    const roles = JSON.parse(document.querySelector('[name=\"personroletypes\"]').value);\n    let strings = [];\n    roles.forEach(function(role) {\n        strings.push({\n            key: role[1],\n            component: role[2],\n        });\n    });\n    Str.get_strings(strings).then(function(results) {\n        entries = JSON.parse(entries);\n        let persons = {persons: []};\n        entries.persons.forEach(function(person) {\n            let localizedrole = results[0];\n            roles.forEach(function(role, index) {\n                if (role[0] === person.role) {\n                    localizedrole = results[index];\n                }\n            });\n            persons.persons.push({\n                role: person.role,\n                firstname: person.firstname,\n                lastname: person.lastname,\n                fullname: person.fullname,\n                name: decodeURI(localizedrole + ': ' +\n                    (person.fullname === undefined ?\n                        person.firstname + ' ' + person.lastname : person.fullname))\n            });\n        });\n        renderPersonsTemplate(persons);\n        return; // For eslint.\n    }).fail(function(e) {\n            window.console.debug(e);\n        }\n    );\n};\n\nconst renderPersonsTemplate = (persons) => {\n    Templates.render('local_oer/persons', persons)\n        .then(function(html, js) {\n            Templates.replaceNodeContents('#local_oer_storedperson_tagarea', html, js);\n            return; // For eslint.\n        }).fail(function(e) {\n            window.console.log(e);\n        }\n    );\n};\n\nconst showPagination = () => {\n    const courseid = document.getElementById(\"local_oer_files_main_area\").dataset.courseid;\n    // Filecount is the number of elements currently available due to filter restrictions.\n    let filecount = parseInt(localStorage.getItem('local-oer-pagination-filecount-' + courseid), 10);\n    const filelist = document.getElementById(\"local-oer-overview-filelist\").innerHTML;\n    const output = JSON.parse(filelist);\n    const filemax = output.files.length;\n    let selected = localStorage.getItem('local-oer-pagination-selected-' + courseid);\n    let page = parseInt(localStorage.getItem('local-oer-pagination-current-' + courseid), 10);\n    let pages = 1;\n    if (isNaN(filecount)) {\n        filecount = filemax;\n    }\n    if (selected !== \"all\") {\n        if (selected === null) {\n            selected = \"8\";\n        }\n        const amount = parseInt(selected, 10);\n        pages = Math.ceil(filecount / amount);\n    }\n    const result = [];\n    if (isNaN(page)) {\n        page = 1;\n    }\n    if (page > pages) {\n        localStorage.setItem('local-oer-pagination-current-' + courseid, \"1\");\n        page = 1;\n    }\n    if (pages <= 10) {\n        for (let i = 1; i <= pages; i++) {\n            result.push({page: i, active: i === page, disabled: false});\n        }\n    } else {\n        // These two cases have both 7 elements, so the length will not fluctuate when changing elements by << or >>;\n        if (page < 3 || page > (pages - 2)) {\n            result.push({page: 1, active: page === 1, disabled: false});\n            result.push({page: 2, active: page === 2, disabled: false});\n            result.push({page: 3, active: page === 3, disabled: false});\n            result.push({page: \"..\", active: false, disabled: true});\n            result.push({page: pages - 2, active: page === (pages - 2), disabled: false});\n            result.push({page: pages - 1, active: page === (pages - 1), disabled: false});\n            result.push({page: pages, active: page === pages, disabled: false});\n        } else if (page === 3) {\n            result.push({page: 1, active: false, disabled: false});\n            result.push({page: 2, active: false, disabled: false});\n            result.push({page: 3, active: true, disabled: false});\n            result.push({page: 4, active: false, disabled: false});\n            result.push({page: \"..\", active: false, disabled: true});\n            result.push({page: pages - 1, active: page === (pages - 1), disabled: false});\n            result.push({page: pages, active: page === pages, disabled: false});\n        } else if (page === (pages - 2)) {\n            result.push({page: 1, active: false, disabled: false});\n            result.push({page: 2, active: false, disabled: false});\n            result.push({page: \"..\", active: false, disabled: true});\n            result.push({page: pages - 3, active: false, disabled: false});\n            result.push({page: pages - 2, active: true, disabled: false});\n            result.push({page: pages - 1, active: false, disabled: false});\n            result.push({page: pages, active: page === pages, disabled: false});\n        } else {\n            result.push({page: 1, active: false, disabled: false});\n            result.push({page: \"..\", active: false, disabled: true});\n            result.push({page: page - 1, active: false, disabled: false});\n            result.push({page: page, active: true, disabled: false});\n            result.push({page: page + 1, active: false, disabled: false});\n            result.push({page: \"..\", active: false, disabled: true});\n            result.push({page: pages, active: false, disabled: false});\n        }\n    }\n    const data = {\n        selectoptions: paginationSelectOptions(selected),\n        control: pages !== 1,\n        previous: page > 1,\n        next: page < pages,\n        pages: pages === 1 ? false : result,\n        filecount: filecount,\n        filemax: filemax\n    };\n    Templates.render('local_oer/pagination', data)\n        .then(function(html, js) {\n            Templates.replaceNodeContents('#local-oer-pagination', html, js);\n            addPaginationListeners(pages);\n            return; // For eslint.\n        }).fail(function(error) {\n        window.console.debug(error);\n    });\n};\n\nconst paginationSelectOptions = (selected) => {\n    return [\n        {value: \"4\", selected: selected === \"4\"},\n        {value: \"8\", selected: selected === \"8\"},\n        {value: \"12\", selected: selected === \"12\"},\n        {value: \"16\", selected: selected === \"16\"},\n        {value: \"32\", selected: selected === \"32\"},\n        {value: \"64\", selected: selected === \"64\"},\n        {value: \"all\", selected: selected === \"all\"},\n    ];\n};\n\nconst addPaginationListeners = (pages) => {\n    let courseid = document.getElementById(\"local_oer_files_main_area\").dataset.courseid;\n    let selected = localStorage.getItem('local-oer-pagination-selected-' + courseid);\n    let page = localStorage.getItem('local-oer-pagination-current-' + courseid);\n    if (page === null || page === 'undefined') {\n        localStorage.setItem('local-oer-pagination-current-' + courseid, \"1\");\n    }\n    if (selected === null || selected === 'undefined') {\n        localStorage.setItem('local-oer-pagination-selected-' + courseid, \"8\");\n    }\n    let selectlistener = document.getElementById('local-oer-pagination-select');\n    let pagelistener = document.getElementById('local-oer-pagination-pages');\n\n    selectlistener.addEventListener(\"change\", function(action) {\n        action.preventDefault();\n        let value = action.target.value;\n        localStorage.setItem('local-oer-pagination-selected-' + courseid, value);\n        localStorage.setItem('local-oer-pagination-current-' + courseid, \"1\");\n        showFiles(false, false);\n    });\n\n    pagelistener.addEventListener(\"click\", function(action) {\n        action.preventDefault();\n        let value = action.target.dataset.page;\n        if (value === undefined || value === '..') {\n            return;\n        }\n        let page = parseInt(localStorage.getItem('local-oer-pagination-current-' + courseid));\n        switch (value) {\n            case 'previous':\n                value = page > 1 ? page - 1 : 1;\n                break;\n            case 'next':\n                value = page < pages ? page + 1 : pages;\n                break;\n        }\n        localStorage.setItem('local-oer-pagination-current-' + courseid, value);\n        showFiles(false, false);\n    });\n};"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireWildcard","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","Service","Templates","Config","ModalFactory","ModalEvents","Fragment","Str","showFiles","init","keepFocus","output","getOutputValues","oldSearchInput","document","getElementById","oldSearchValue","value","render","then","html","js","replaceNodeContents","searchInput","window","console","log","focus","fail","error","debug","showPagination","_exports","showForm","type","title","options","params","JSON","stringify","courseid","dataset","context","args","formtype","form","loadFragment","done","data","includes","showFormModal","element","modaltype","types","CANCEL","SAVE_CANCEL","create","body","modal","setLarge","show","initPersonButtonListener","addRemoveTagListener","initSetPreferenceListener","addInputFieldInputListener","getRoot","on","hidden","destroy","save","saveForm","catch","formData","find","serialize","saveargs","assign","settings","formSubmit","response","indexOf","preference","replaceFileInfo","loadFile","identifier","prepareFiles","loadFiles","promises","filelist","innerHTML","parse","files","forEach","file","index","prefix","area","showTags","addEventListener","key","addStoredTag","length","tagarea","tag","replace","trim","tags","querySelector","target","name","removePerson","split","result","push","join","entries","entry","tagvalue","button","action","preventDefault","showPersons","showPersonForm","setInvalid","creator","get_string","localizedTitle","setSaveButtonText","fields","role","firstname","lastname","field","pair","addPerson","classList","add","person","names","found","update","persons","storedname","fullname","storedperson","roles","strings","component","get_strings","results","localizedrole","decodeURI","undefined","renderPersonsTemplate","filecount","parseInt","localStorage","getItem","filemax","selected","page","pages","isNaN","amount","Math","ceil","setItem","active","disabled","selectoptions","paginationSelectOptions","control","previous","next","addPaginationListeners","selectlistener","pagelistener"],"mappings":"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"}